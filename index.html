<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ella Musaieva - Creative Technologist</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Martian+Mono:wght@200;300&display=swap" rel="stylesheet">
    <style>
        :root {
            --footer-height: 72px; /* used to keep right rail above footer on small screens */
        }
         * {
             margin: 0;
             padding: 0;
             box-sizing: border-box;
         }

         body {
             background: #FFFFFF;
             color: #000000;
             font-family: 'Martian Mono', monospace;
             font-weight: 200;
             font-size: 14px;
             overflow-x: hidden;
             line-height: 1.7;
         }

         .news-ticker-container {
             position: fixed;
             top: 0;
             left: 0;
             right: 0;
             height: 45px;
             background: #FF0000;
             z-index: 1000;
             overflow: hidden;
             box-shadow: 0 2px 10px rgba(255, 0, 0, 0.3);
         }

         .news-ticker {
             display: flex;
             white-space: nowrap;
             animation: scroll 20s linear infinite;
             padding: 12px 0;
         }

         @keyframes scroll {
             0% { transform: translateX(0); }
             100% { transform: translateX(-33.333%); }
         }

         .ticker-item {
             display: inline-flex;
             align-items: center;
             gap: 12px;
             padding: 0 30px;
             font-size: 14px;
             font-weight: 200;
         }

         .ticker-category {
             font-weight: 200;
             text-transform: uppercase;
             font-size: 11px;
             letter-spacing: 1px;
         }

         .ticker-fact {
             color: #000;
         }

         .ticker-source {
             color: #000;
             opacity: 0.7;
             font-size: 12px;
         }

         .ticker-separator {
             color: #000;
             font-size: 16px;
         }

         .main-container {
             position: fixed;
             top: 45px;
             left: 0;
             right: 0;
             bottom: 0;
             display: grid;
             grid-template-columns: 1fr 60px;
         }

         .model-section {
             display: flex;
             flex-direction: column;
             height: 100%;
             overflow-y: auto;
         }

         .pod-container {
             width: 100%;
             height: calc(100vh - 500px);
             min-height: 500px;
             position: relative;
             background: #FAFAFA;
             border-right: 1px solid #E0E0E0;
         }

         .where-am-i {
             position: absolute;
             top: 30px;
             left: 30px;
             font-size: 14px;
             color: #666666;
             cursor: pointer;
             transition: color 0.3s ease;
-            z-index: 10;
+            z-index: 4000; /* make sure it sits above canvas/nav */
         }

         .where-am-i:hover {
             color: #000000;
         }

         #threejsCanvas {
             width: 100%;
             height: 100%;
             display: block;
         }

         .loading-indicator {
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             text-align: center;
             z-index: 10;
         }

         .loader {
             border: 3px solid #f3f3f3;
             border-top: 3px solid #000000;
             border-radius: 50%;
             width: 40px;
             height: 40px;
             animation: spin 1s linear infinite;
             margin: 0 auto 15px;
         }

         @keyframes spin {
             0% { transform: rotate(0deg); }
             100% { transform: rotate(360deg); }
         }

         .loading-indicator p {
             color: #666;
             font-size: 12px;
             font-weight: 200;
         }

         .info-section {
             padding: 60px;
             background: #FFFFFF;
             border-right: 1px solid #E0E0E0;
             border-top: 1px solid #E0E0E0;
             display: flex;
             flex-direction: column;
             gap: 40px;
             align-items: flex-start; /* keep content left aligned */
         }

         /* Avatar Area - After Text */
         .avatar-area {
             display: none; /* removed personal avatar */
         }

         /* Text Content */
         .text-content {
             text-align: left; /* moved name and text to the left */
             width: 100%;
         }

         .info-section h1 {
             font-size: 24px;
             font-weight: 200;
             margin-bottom: 10px;
             letter-spacing: -0.5px;
         }

         .info-section .title {
             font-size: 18px;
             color: #666666;
             margin-bottom: 25px;
             line-height: 1.8;
         }

         .info-section .description {
             font-size: 14px;
             color: #666666;
             line-height: 1.8;
             max-width: 700px;
         }

         .nav-sidebar {
             display: flex;
             flex-direction: column;
             background: #FFFFFF;
             border-left: 1px solid #E0E0E0;
         }

         .nav-tab {
             flex: 1;
             display: flex;
             flex-direction: column;
             align-items: center;
             justify-content: center;
             text-decoration: none;
             color: #666666;
             font-size: 10px;
             border-bottom: 1px solid #E0E0E0;
             transition: all 0.3s ease;
             position: relative;
             padding: 15px 5px;
             text-align: center;
         }

         .nav-tab:last-child {
             border-bottom: none;
         }

         .nav-tab::before {
             content: '';
             position: absolute;
             left: 0;
             top: 0;
             bottom: 0;
             width: 0;
             background: #FF0000;
             transition: width 0.3s ease;
         }

         .nav-tab:hover {
             background: #FAFAFA;
             color: #000000;
         }

         .nav-tab:hover::before {
             width: 3px;
         }

         .tab-number {
             display: block;
             font-size: 18px;
             font-weight: 200;
             margin-bottom: 8px;
             opacity: 0.3;
         }

         .tab-label {
             writing-mode: vertical-rl;
             text-orientation: mixed;
             text-transform: uppercase;
             letter-spacing: 2px;
             font-size: 9px;
         }

         .modal {
             position: fixed;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             background: rgba(255, 255, 255, 0.95);
             backdrop-filter: blur(10px);
             z-index: 10000;
             display: none;
             align-items: center;
             justify-content: center;
             padding: 40px;
         }

         .modal.active {
             display: flex;
         }

         .modal-content {
             max-width: 700px;
             background: #FFFFFF;
             padding: 60px;
             border: 1px solid #E0E0E0;
             position: relative;
             box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
         }

         .modal-close {
             position: absolute;
             top: 20px;
             right: 20px;
             background: none;
             border: none;
             font-size: 28px;
             cursor: pointer;
             color: #999;
             transition: color 0.3s ease;
             width: 40px;
             height: 40px;
             display: flex;
             align-items: center;
             justify-content: center;
             font-family: 'Martian Mono', monospace;
             font-weight: 200;
         }

         .modal-close:hover {
             color: #000;
         }

         .modal-content h2 {
             font-size: 18px;
             font-weight: 200;
             margin-bottom: 30px;
             color: #000;
         }

         .modal-content p {
             font-size: 14px;
             font-weight: 200;
             line-height: 1.8;
             color: #333;
             margin-bottom: 20px;
         }

         .modal-content .signature {
             text-align: right;
             margin-top: 8px;
             font-style: italic;
             color: #333;
             opacity: 0.85;
             font-size: 14px;
         }

         .footer {
             position: fixed;
             bottom: 0;
             left: 0;
             right: 60px;
             padding: 15px 40px;
             display: flex;
             justify-content: space-between;
             align-items: center;
             background: rgba(255, 255, 255, 0.95);
             backdrop-filter: blur(10px);
             border-top: 1px solid #E0E0E0;
             z-index: 999;
         }

         .footer-left {
             font-size: 12px;
             color: #666666;
         }

         .social-links {
             display: flex;
             gap: 15px;
         }

         .social-links a {
             color: #666666;
             transition: color 0.3s ease;
         }

         .social-links a:hover {
             color: #000000;
         }

         @media (max-width: 968px) {
-            /* keep main content full width but reserve space on the right for the vertical nav */
-            .main-container {
-                grid-template-columns: 1fr;
-                grid-template-rows: 1fr;
-                padding-right: 60px; /* avoid overlap with fixed right rail */
-            }
-
-            /* make the right-side nav a fixed vertical rail on mobile so buttons stay visible */
-            .nav-sidebar {
-                position: fixed;
-                top: 45px;
-                right: 0;
-                width: 60px;
-                /* keep nav above footer and allow scrolling if content taller than available space */
-                bottom: var(--footer-height);
-                max-height: calc(100vh - 45px - var(--footer-height));
-                overflow-y: auto;
-                display: flex;
-                flex-direction: column;
-                align-items: center;
-                justify-content: flex-start;
-                background: #FFFFFF;
-                border-left: 1px solid #E0E0E0;
-                z-index: 3000; /* ensure nav sits above footer/other overlays */
-                box-shadow: 0 -2px 8px rgba(0,0,0,0.03);
-            }
-
-            .nav-tab {
-                border-bottom: 1px solid #E0E0E0;
-                width: 100%;
-                padding: 12px 6px;
-                box-sizing: border-box;
-                min-height: 56px; /* touch-friendly size */
-                touch-action: manipulation;
-                -webkit-tap-highlight-color: transparent;
-                display: flex;
-                align-items: center;
-                justify-content: center;
-            }
-
-            .nav-tab:last-child {
-                border-bottom: none;
-            }
-
-            /* keep the vertical rail label orientation so items remain compact and legible */
-            .tab-label {
-                writing-mode: vertical-rl;
-                text-orientation: mixed;
-                font-size: 9px;
-            }
-
-            .pod-container {
-                height: 50vh;
-                min-height: 400px;
-                border-right: none;
-            }
-
-            .info-section {
-                padding: 40px 30px;
-                border-right: none;
-                gap: 30px;
-            }
-
-            .avatar-area {
-                width: 250px;
-                height: 250px;
-            }
-
-            .avatar-area::before {
-                width: 150px;
-                height: 150px;
-            }
-
-            .info-section h1 {
-                font-size: 20px;
-            }
-
-            .footer {
-                right: 0;
-                flex-direction: column;
-                gap: 10px;
-                padding: 15px 20px;
-                z-index: 900; /* sit below the fixed nav rail */
-            }
+            /* revert: horizontal fixed bottom nav above footer and smaller tabs so all are visible */
+            .main-container {
+                grid-template-columns: 1fr;
+                grid-template-rows: 1fr auto;
+                padding-right: 0;
+                padding-bottom: calc(var(--footer-height) + 60px); /* reserve space for bottom nav */
+            }
+
+            .nav-sidebar {
+                position: fixed;
+                left: 0;
+                right: 0;
+                bottom: var(--footer-height);
+                height: 56px;
+                display: flex;
+                flex-direction: row;
+                align-items: center;
+                justify-content: space-around;
+                background: #FFFFFF;
+                border-top: 1px solid #E0E0E0;
+                border-left: none;
+                z-index: 3000;
+                box-shadow: 0 -2px 8px rgba(0,0,0,0.03);
+            }
+
+            .nav-tab {
+                flex: 0 1 auto;
+                border-bottom: none;
+                border-right: 1px solid #E0E0E0;
+                padding: 8px 6px;
+                min-width: 48px;
+                min-height: 44px;
+                font-size: 11px;
+                display: flex;
+                flex-direction: column;
+                align-items: center;
+                justify-content: center;
+            }
+
+            .nav-tab:last-child { border-right: none; }
+            .tab-number { font-size: 14px; margin-bottom: 4px; }
+            .tab-label { writing-mode: horizontal-tb; font-size: 10px; letter-spacing: 1px; }
+
+            .pod-container { height: 50vh; min-height: 360px; border-right: none; }
+            .info-section { padding: 40px 20px; }
+            .footer { z-index: 900; right: 0; }
         }
 
         @media (max-width: 640px) {
-            /* retain right rail and ensure main content doesn't get covered */
-            .main-container { padding-right: 60px; }
-            .nav-sidebar {
-                width: 56px;
-                top: 45px;
-                right: 0;
-                bottom: var(--footer-height);
-                max-height: calc(100vh - 45px - var(--footer-height));
-                overflow-y: auto;
-            }
+            /* mobile: keep bottom horizontal nav and make buttons smaller */
+            .main-container { padding-bottom: calc(var(--footer-height) + 56px); padding-right: 0; }
+            .nav-sidebar { height: 56px; bottom: var(--footer-height); left: 0; right: 0; flex-direction: row; }
             .pod-container {
                 height: 40vh;
                 min-height: 300px;
             }
 
             .info-section {
                 padding: 30px 20px;
                 gap: 25px;
             }
 
             .avatar-area {
                 width: 200px;
                 height: 200px;
             }
 
             .avatar-area::before {
                 width: 120px;
                 height: 120px;
             }
 
             .info-section h1 {
                 font-size: 18px;
             }
 
             .tab-number {
                 font-size: 18px;
                 margin-bottom: 5px;
             }
 
-            .tab-label {
-                font-size: 9px;
-            }
+            .nav-tab { padding: 6px 6px; min-width: 44px; min-height: 40px; font-size: 10px; }
+            .tab-number { font-size: 12px; }
+            .tab-label { font-size: 9px; writing-mode: horizontal-tb; }
             /* ensure the where-am-i button remains visible and tappable on small screens */
             .where-am-i {
                 top: 12px;
                 left: 12px;
                 font-size: 13px;
                 padding: 6px 8px;
                 background: rgba(255,255,255,0.85);
                 border-radius: 4px;
                 z-index: 4001;
             }
         }
     </style>
</head>
<body>
    <div class="news-ticker-container">
        <div class="news-ticker" id="newsTicker">
            <div class="ticker-item">
                <span class="ticker-category" style="color: #00FF41;">[LOADING]</span>
                <span class="ticker-fact">Initializing AI news agent...</span>
                <span class="ticker-separator">⟡</span>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="model-section">
            <div class="pod-container" id="podContainer">
                <div class="where-am-i" id="whereAmI"></div>
                <canvas id="threejsCanvas"></canvas>
                <div class="loading-indicator" id="loadingIndicator">
                    <div class="loader"></div>
                    <p>Loading model...</p>
                </div>
            </div>

            <div class="info-section">
                <div class="text-content">
                    <h1>Ella Musaieva</h1>
                    <p class="title">Creative Technologist</p>
                    <p class="description">
                        Exploring the intersection of physical space, digital capture, and immersive experience through computational design and systems thinking.
                    </p>
                </div>

                <div class="avatar-area">
                    <div class="avatar-placeholder">Personal Avatar</div>
                </div>
            </div>
        </div>

        <nav class="nav-sidebar">
            <a href="photogrammetry_blog1.html" class="nav-tab">
                <span class="tab-number">01</span>
                <span class="tab-label">Research</span>
            </a>
            <a href="archive.html" class="nav-tab">
                <span class="tab-number">02</span>
                <span class="tab-label">Works & Archive</span>
            </a>
            <a href="mailto:ella@uttertosh.com" class="nav-tab">
                <span class="tab-number">03</span>
                <span class="tab-label">Contact</span>
            </a>
            <a href="Ella_Musaieva_resume.pdf" class="nav-tab" target="_blank">
                <span class="tab-number">04</span>
                <span class="tab-label">CV</span>
            </a>
        </nav>
    </div>

    <footer class="footer">
        <div class="footer-left">©️ 2024 Ella Musaieva</div>
        <div class="social-links">
            <a href="https://twitter.com/uttertosh" aria-label="Twitter">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                </svg>
            </a>
            <a href="http://www.linkedin.com/in/ella-musaieva" aria-label="LinkedIn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"></path>
                    <rect x="2" y="9" width="4" height="12"></rect>
                    <circle cx="4" cy="4" r="2"></circle>
                </svg>
            </a>
        </div>
    </footer>

    <div class="modal" id="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">×</button>
            <h2>–Where am I?</h2>
            <div class="modal-body">
                <p>
                    Hi!<br>
                    
                    This is my creative and research practice. Since making things is just another way of asking questions — I work with systems that capture, translate, and recompose the real — scanning structures, simulating futures, letting machines speculate alongside me and analog mark-making. Each project is a method for touching the world indirectly, and learning what survives the translation.
                </p>
                <p>
                    Technology here is neither neutral nor dominant. It is a collaborator, sometimes precise, sometimes unreliable. Pipelines, workflows, and prototypes become ways of tracing how presence slips into digital space — and how intelligence finds its way back into form.
                </p>
                <p>
                    A laboratory. A studio? Something in between, still awake.
                </p>
                <p class="signature">— Ella</p>
            </div>
        </div>
    </div>

    <!-- News Ticker Script (Regular JS) -->
    <!-- News Ticker Script (Regular JS) -->
    <script>
        (function() {
            const ticker = document.getElementById('newsTicker');
            let currentNews = [];
            
            const fallbackNews = [
                { fact: "Neural networks achieve breakthrough in protein structure prediction", source: "Nature", category: "AI" },
                { fact: "Quantum processors reach new milestone in error correction", source: "Science", category: "QUANTUM" },
                { fact: "Edge AI chips reduce power consumption by 80%", source: "TechCrunch", category: "HARDWARE" },
                { fact: "Decentralized identity protocol gains mainstream adoption", source: "Wired", category: "WEB3" },
                { fact: "Real-time rendering engines achieve photorealistic quality", source: "NVIDIA", category: "GRAPHICS" },
                { fact: "Autonomous systems demonstrate human-level decision making", source: "MIT", category: "ROBOTICS" },
                { fact: "Foundation models achieve 10x parameter efficiency", source: "ArXiv", category: "ML" },
                { fact: "3nm process node enables 50% performance gain", source: "TSMC", category: "CHIPS" }
            ];
            
            function categorizeNews(title) {
                const lower = title.toLowerCase();
                if (lower.includes('ai') || lower.includes('neural') || lower.includes('machine learning')) return 'AI';
                if (lower.includes('quantum')) return 'QUANTUM';
                if (lower.includes('chip') || lower.includes('processor') || lower.includes('semiconductor')) return 'CHIPS';
                if (lower.includes('web3') || lower.includes('blockchain') || lower.includes('crypto')) return 'WEB3';
                if (lower.includes('graphics') || lower.includes('gpu') || lower.includes('rendering')) return 'GRAPHICS';
                if (lower.includes('robot') || lower.includes('autonomous')) return 'ROBOTICS';
                if (lower.includes('hardware')) return 'HARDWARE';
                return 'ML';
            }
            
            async function fetchNews() {
                try {
                    const response = await fetch('https://api.rss2json.com/v1/api.json?rss_url=https://techcrunch.com/feed/');
                    const data = await response.json();
                    
                    if (data.status === 'ok' && data.items && data.items.length > 0) {
                        currentNews = data.items.slice(0, 8).map(item => ({
                            fact: item.title,
                            source: 'TechCrunch',
                            category: categorizeNews(item.title)
                        }));
                        // no-op: fetched news
                        updateTicker();
                    } else {
                        throw new Error('Invalid response');
                    }
                } catch (error) {
                    // fallback news used
                    currentNews = fallbackNews;
                    updateTicker();
                }
            }
            
            function getCategoryColor(cat) {
                const colors = {
                    'AI': '#00FF41', 'HARDWARE': '#FF0080', 'QUANTUM': '#B24BF3',
                    'WEB3': '#FFD700', 'GRAPHICS': '#FF1744', 'ROBOTICS': '#00E5FF',
                    'ML': '#00FF41', 'CHIPS': '#FF0080'
                };
                return colors[cat] || '#00FF41';
            }
            
            function updateTicker() {
                const news = currentNews.length > 0 ? currentNews : fallbackNews;
                const html = news.map(item => `
                    <div class="ticker-item">
                        <span class="ticker-category" style="color: ${getCategoryColor(item.category)};">[${item.category}]</span>
                        <span class="ticker-fact">${item.fact}</span>
                        <span class="ticker-source">— ${item.source}</span>
                        <span class="ticker-separator">⟡</span>
                    </div>
                `).join('');
                ticker.innerHTML = html + html + html;
            }
            
            fetchNews();
            setInterval(fetchNews, 600000); // 10 minutes
            // news agent running
        })();
    </script>

    <!-- Modal Script -->
    <script>
        const modal = document.getElementById('modal');
        const whereAmI = document.getElementById('whereAmI');
        const modalClose = document.getElementById('modalClose');

        const whereAmIText = '–Where am I?_';
        let charIndex = 0;
        
        function typeWhereAmI() {
            if (charIndex < whereAmIText.length) {
                whereAmI.textContent = whereAmIText.slice(0, charIndex + 1);
                charIndex++;
                setTimeout(typeWhereAmI, 100);
            }
        }
        
        setTimeout(typeWhereAmI, 1000);

        whereAmI.addEventListener('click', () => modal.classList.add('active'));
        modalClose.addEventListener('click', () => modal.classList.remove('active'));
        modal.addEventListener('click', (e) => {
            if (e.target === modal) modal.classList.remove('active');
        });
    </script>

    <!-- Three.js Module Script -->
    <script type="importmap">
    {
        "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/"
        }
    }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { RGBELoader } from 'three/addons/loaders/RGBELoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        const canvas = document.getElementById('threejsCanvas');
        const podContainer = document.getElementById('podContainer');
        
        let scene, camera, renderer, controls;
        let model = null;
        let clock = new THREE.Clock();
        let userOrbiting = false;
        let shadowPlane = null;
        
        scene = new THREE.Scene();
        const FOG_COLOR = 0xFAFAFA;
        scene.background = new THREE.Color(FOG_COLOR);
        // Add subtle exponential fog to the scene for depth and atmosphere
        scene.fog = new THREE.FogExp2(FOG_COLOR, 0.015);
        
        camera = new THREE.PerspectiveCamera(
            45,
            podContainer.clientWidth / podContainer.clientHeight,
            0.01,
            5000
        );
        camera.position.set(0, 1.5, 4);
        
        renderer = new THREE.WebGLRenderer({ canvas, antialias: true, logarithmicDepthBuffer: true });
        renderer.setSize(podContainer.clientWidth, podContainer.clientHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.toneMappingExposure = 1.1;
        renderer.shadowMap.enabled = false; // disable drop shadows for a clean look
        // Ensure the clear color matches the fog/background color
        renderer.setClearColor(FOG_COLOR, 1);

        controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.06;
        controls.rotateSpeed = 0.5;
        controls.zoomSpeed = 0.8;
        controls.minDistance = 0.8;
        controls.maxDistance = 12;
        controls.addEventListener('start', () => { userOrbiting = true; });
        controls.addEventListener('end', () => { userOrbiting = false; });
        
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        
        const hemiLight = new THREE.HemisphereLight(0xffffff, 0xbfbfbf, 0.5);
        scene.add(hemiLight);
        
        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.6);
        directionalLight.position.set(0, 12, 18); // higher, frontal
        directionalLight.target.position.set(0, 1.5, 0);
        directionalLight.castShadow = false;
        scene.add(directionalLight);
        scene.add(directionalLight.target);
        
        const fillLight = new THREE.DirectionalLight(0xffffff, 0.2);
        fillLight.position.set(-6, 4, -10);
        scene.add(fillLight);
        
        const loader = new GLTFLoader();

        // Configuration: Your GitHub repository details (define before building HDR URL)
        const GITHUB_CONFIG = {
            enabled: true,
            username: 'elleyale',
            repo: 'portfolio',
            branch: 'main',
            modelPath: 'model_root.glb'
        };
        
         // HDRI / environment lighting
         // Provide the HDR identifier you gave — adjust path if your HDR lives elsewhere in the repo.
         const HDR_SHA = 'f235ae5ea32b13078c7ca8eb4b30880b8d0f13fe';
        // Try to load the HDR from the exact commit (use HDR_SHA as the git ref so we fetch the HDR stored at that commit).
        // Falls back to a local ./hdrs/ file if not enabled.
        const hdrUrl = GITHUB_CONFIG.enabled
            ? `https://raw.githubusercontent.com/${GITHUB_CONFIG.username}/${GITHUB_CONFIG.repo}/${HDR_SHA}/hdris/${HDR_SHA}.hdr`
            : `./hdrs/${HDR_SHA}.hdr`;
         
         // PMREM generator for correct lighting with HDR equirectangular maps
         const pmremGenerator = new THREE.PMREMGenerator(renderer);
         pmremGenerator.compileEquirectangularShader();
         
         // Load the HDR and apply as scene.environment (and optionally background)
         new RGBELoader()
             .setDataType(THREE.UnsignedByteType)
             .load(
                 hdrUrl,
                 (texture) => {
                     const envMap = pmremGenerator.fromEquirectangular(texture).texture;
                     scene.environment = envMap;
                     // Optional: uncomment to use HDR as visible background as well
                     // scene.background = envMap;
 
                     // Small adjustment for stronger radiance from HDRI
                     renderer.toneMappingExposure = 1.25;
 
                     texture.dispose();
                     pmremGenerator.dispose();
                     console.log('HDRI loaded and applied:', hdrUrl);
                 },
                 undefined,
                 (err) => {
                     console.warn('Failed to load HDRI:', hdrUrl, err);
                     pmremGenerator.dispose();
                 }
             );
        
        // Build GitHub raw URL for model (uses branch as configured)
        const githubUrl = GITHUB_CONFIG.enabled 
            ? `https://raw.githubusercontent.com/${GITHUB_CONFIG.username}/${GITHUB_CONFIG.repo}/${GITHUB_CONFIG.branch}/${GITHUB_CONFIG.modelPath}`
            : null;
        
        function loadModelWithFallback() {
            const primaryUrl = githubUrl || 'model_root.glb';
            const fallbackUrl = githubUrl ? 'model_root.glb' : null;
            
            loader.load(
                primaryUrl,
                onModelLoaded,
                onProgress,
                (error) => {
                    if (fallbackUrl) {
                        loader.load(
                            fallbackUrl,
                            onModelLoaded,
                            onProgress,
                            onError
                        );
                    } else {
                        onError(error);
                    }
                }
            );
        }
        
        const MODEL_SCALE_MULTIPLIER = 2.0; // Lowered to keep model fully in view

        function frameCameraToObject(box) {
            const size = box.getSize(new THREE.Vector3());
            const center = box.getCenter(new THREE.Vector3());
            const maxDim = Math.max(size.x, size.y, size.z);
            const fitHeightDistance = maxDim / (2 * Math.tan((Math.PI * camera.fov) / 360));
            const distance = fitHeightDistance * 1;
            camera.position.copy(center).add(new THREE.Vector3(0, size.y * 0.4, distance));
            camera.lookAt(center);
            controls.target.copy(center);
            controls.update();
            camera.updateProjectionMatrix();
        }

        function onModelLoaded(gltf) {
            const root = gltf.scene;
            scene.add(root);

            const glassMesh = root.getObjectByName("glass");
            if (glassMesh && glassMesh.isMesh) {
                const mats = Array.isArray(glassMesh.material) ? glassMesh.material : [glassMesh.material];
                mats.forEach((m) => {
                    if (!m) return;

                    // Intensified optical properties for stronger spectral dispersion
                    m.metalness = 0.0;
                    m.roughness = 0.0015;        // ultra glossy for crisp spectral highlights
                    m.transmission = 0.985;     // very transmissive
                    m.ior = 1.65;               // higher IOR for stronger Fresnel
                    m.thickness = 0.04;         // thicker to accentuate dispersion
                    if ("envMapIntensity" in m) m.envMapIntensity = 3.8;
                    if ("reflectivity" in m) m.reflectivity = 1.0;
                    if ("clearcoat" in m) m.clearcoat = 1.0;
                    if ("clearcoatRoughness" in m) m.clearcoatRoughness = 0.005;
                    if ("transparent" in m) m.transparent = true;
                    if ("opacity" in m) m.opacity = 0.995;

                    // keep base neutral so shader-driven spectrum is visible
                    if ("color" in m && m.color && typeof m.color.setHex === "function") {
                        m.color.setHex(0xFFFFFB);
                    } else if ("color" in m && typeof m.color === "number") {
                        m.color = 0xFFFFFB;
                    }

                    // runtime controls
                    m.userData = m.userData || {};
                    m.userData.dispersionStrength = 0.48; // larger spread for vivid RGB separation
                    m.userData._u_time = { value: 0.0 };
                    m.userData._u_dispersion = { value: m.userData.dispersionStrength };

                    // Inject shader patch to approximate chromatic dispersion / prismatic effect.
                    // Always assign onBeforeCompile to ensure patch is applied.
                    const prevOnBeforeCompile = m.onBeforeCompile;
                    m.onBeforeCompile = (shader) => {
                        // create / expose uniforms
                        shader.uniforms.u_time = shader.uniforms.u_time || { value: 0.0 };
                        shader.uniforms.u_dispersion = shader.uniforms.u_dispersion || { value: m.userData.dispersionStrength };
                        shader.uniforms.u_thickness = shader.uniforms.u_thickness || { value: m.thickness || 0.02 };

                        // store refs for runtime updates
                        m.userData._u_time = shader.uniforms.u_time;
                        m.userData._u_dispersion = shader.uniforms.u_dispersion;
                        m.userData._u_thickness = shader.uniforms.u_thickness;

                        // HSV -> RGB helper
                        const hsvFn =
`vec3 hsv2rgb(vec3 c){
  vec3 p = abs(fract(c.xxx + vec3(0.0, 2.0/3.0, 1.0/3.0)) * 6.0 - 3.0);
  return c.z * mix(vec3(1.0), clamp(p - 1.0, 0.0, 1.0), c.y);
}
`;

                        // inject helper + uniforms at shader top (before main)
                        shader.fragmentShader = shader.fragmentShader.replace(
                            'void main() {',
                            hsvFn + '\nuniform float u_time;\nuniform float u_dispersion;\nuniform float u_thickness;\n\nvoid main() {'
                        );

                        // replace final color write to blend a vivid prismatic effect
                        shader.fragmentShader = shader.fragmentShader.replace(
                            'gl_FragColor = vec4( outgoingLight, diffuseColor.a );',
                            [
                                '// Chromatic dispersion / iridescence patch',
                                'float fresnelFactor = pow(1.0 - max(0.0, dot(normalize(vNormal), normalize(-vViewPosition))), 1.05);',
                                'float angleFac = clamp(1.0 - dot(normalize(vNormal), normalize(-vViewPosition)), 0.0, 1.0);',
                                'float thicknessFactor = clamp(u_thickness * 30.0, 0.0, 8.0);',
                                'float dsp = u_dispersion * thicknessFactor;',
                                'float hue = fract(angleFac * 3.8 + u_time * 0.12);',
                                'vec3 rcol = hsv2rgb(vec3(fract(hue - dsp * 1.35), 0.995, 1.0));',
                                'vec3 gcol = hsv2rgb(vec3(fract(hue), 0.995, 1.0));',
                                'vec3 bcol = hsv2rgb(vec3(fract(hue + dsp * 1.35), 0.995, 1.0));',
                                'vec3 prism = vec3(rcol.r, gcol.g, bcol.b) * vec3(1.6, 1.2, 1.0);',
                                'float rainbowStrength = smoothstep(0.0, 1.0, fresnelFactor) * 2.0;',
                                'outgoingLight += prism * rainbowStrength;',
                                'outgoingLight = min(outgoingLight, vec3(6.0));',
                                'gl_FragColor = vec4(outgoingLight, diffuseColor.a);'
                            ].join('\n')
                        );

                        if (typeof prevOnBeforeCompile === 'function') prevOnBeforeCompile(shader);
                    };

                    // Update shader uniforms per-frame so the rainbow animates with rotation/camera
                    const prevOnBeforeRender = m.onBeforeRender;
                    m.onBeforeRender = function(renderer, scene, camera, geometry, material, group) {
                        if (material.userData) {
                            if (material.userData._u_time) material.userData._u_time.value = performance.now() * 0.001;
                            if (material.userData._u_dispersion) material.userData._u_dispersion.value = m.userData.dispersionStrength;
                            if (material.userData._u_thickness) material.userData._u_thickness.value = m.thickness || 0.02;
                        }
                        if (typeof prevOnBeforeRender === 'function') prevOnBeforeRender.apply(this, arguments);
                    };

                    m.needsUpdate = true;
                });
            }
            
            const podMesh = root.getObjectByName("pod");
            if (podMesh && podMesh.isMesh) {
                const mats = Array.isArray(podMesh.material) ? podMesh.material : [podMesh.material];
                mats.forEach((m) => {
                    if (!m) return;

                    // Make the pod clean white and slightly more radiant
                    if ("color" in m && m.color && typeof m.color.setHex === "function") {
                        m.color.setHex(0xFFFFFF);
                    } else if ("color" in m && typeof m.color === "number") {
                        m.color = 0xFFFFFF;
                    }

                    // Keep non-metallic but allow gentle specular/radiance
                    if ("metalness" in m) m.metalness = 0.0;
                    if ("roughness" in m) m.roughness = 0.45; // moderate roughness for sealed painted surface
                    if ("envMapIntensity" in m) m.envMapIntensity = 0.6; // visible environment reflection for radiance
                    if ("specularIntensity" in m) m.specularIntensity = 0.35;

                    // small subsurface/emissive boost if supported to give subtle glow on highlights
                    if ("emissiveIntensity" in m) m.emissiveIntensity = 0.08;
                    if ("emissive" in m && m.emissive && typeof m.emissive.setHex === "function") {
                        // keep emissive very subtle and neutral
                        m.emissive.setHex(0x0a0a0a);
                    }

                    m.needsUpdate = true;
                });
            }
            
            const modelRoot = root.getObjectByName("model_root");
            model = modelRoot || root;
            
            const box = new THREE.Box3().setFromObject(root);
            const centerBefore = box.getCenter(new THREE.Vector3());
            // Recentering pass 1 (pre-scale)
            root.position.sub(centerBefore);
            box.setFromObject(root);

            let size = box.getSize(new THREE.Vector3());
            let maxDim = Math.max(size.x, size.y, size.z);
            if (maxDim < 1e-6) {
                const placeholder = new THREE.Mesh(
                    new THREE.BoxGeometry(1, 1, 1),
                    new THREE.MeshNormalMaterial({ wireframe: false })
                );
                placeholder.name = 'debug_placeholder';
                root.add(placeholder);
                box.setFromObject(root);
                size = box.getSize(new THREE.Vector3());
                maxDim = Math.max(size.x, size.y, size.z);
            }

            const scale = (2.5 / maxDim) * MODEL_SCALE_MULTIPLIER;
            root.scale.multiplyScalar(scale);

            box.setFromObject(root);

            // Second recenter pass after scale to eliminate offsets
            const centerAfterScale = box.getCenter(new THREE.Vector3());
            root.position.sub(centerAfterScale);
            box.setFromObject(root);

            // Set initial orientation (~90° left)
            model.rotation.y = 1,5 * Math.PI;

            // Recenter after rotation to keep it visually centered
            const rotatedBox = new THREE.Box3().setFromObject(model);
            const rotatedCenter = rotatedBox.getCenter(new THREE.Vector3());
            model.position.sub(rotatedCenter);
            rotatedBox.setFromObject(model);
            const rotatedCenterAfter = rotatedBox.getCenter(new THREE.Vector3());

            // Frame camera to the rotated, recentered model
            frameCameraToObject(rotatedBox);

            // No shadows; keep materials bright
            model.traverse((child) => {
                if (child.isMesh) {
                    child.castShadow = false;
                    child.receiveShadow = false;
                }
            });

            // Update controls bounds to model scale
            const distanceLimit = Math.max(50, maxDim * 40);
            controls.minDistance = Math.max(0.5, maxDim * 0.05);
            controls.maxDistance = distanceLimit;

            document.getElementById('loadingIndicator').style.display = 'none';
        }
        
        function onProgress(progress) {
            if (progress.total) {
                const percent = Math.round(progress.loaded / progress.total * 100);
            }
        }
        
        function onError(error) {
            const loadingIndicator = document.getElementById('loadingIndicator');
            if (loadingIndicator) {
                loadingIndicator.innerHTML = `
                    <p style="color: #999; font-size: 11px; line-height: 1.6;">
                        Model not found<br>
                        ${githubUrl ? 'Check GitHub repo settings' : 'Check file location'}<br>
                        <span style="font-size: 10px; opacity: 0.7;">Open console (F12) for details</span>
                    </p>
                `;
            }
        }
        
        // Start loading
        loadModelWithFallback();
        
        function animate() {
            requestAnimationFrame(animate);
            const delta = clock.getDelta();
            
            if (model && !userOrbiting) {
                // Rotation disabled
            }

            controls.update();
            
            renderer.render(scene, camera);
        }
        
        animate();
        
        window.addEventListener('resize', () => {
            const width = podContainer.clientWidth;
            const height = podContainer.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });
    </script>
</body>
</html>